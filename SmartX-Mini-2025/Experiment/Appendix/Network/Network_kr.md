# 네트워크 발전과 게이트웨이 개념 부록

## 목차

1. [네트워크 발전 개요](#1-네트워크-발전-개요)
2. [네트워크에서 IP와 Port란?](#2-네트워크에서-ip와-port란)
3. [게이트웨이(Gateway)란?](#3-게이트웨이gateway란)
4. [네트워크에서 IP, 포트, 게이트웨이의 관계](#4-네트워크에서-ip-포트-게이트웨이의-관계)
5. [실습: 게이트웨이 및 네트워크 테스트](#5-실습-게이트웨이-및-네트워크-테스트)

## 1. 네트워크 발전 개요

### 네트워크란?

사람은 소리를 통해 서로 대화합니다. 반면, 컴퓨터는 전기 신호나 무선 신호를 통해 데이터를 주고받습니다. 이러한 정보 교환의 연결 구조를 바로 <b>"네트워크(Network)"</b>라고 부릅니다.

초기에는 두 대의 컴퓨터를 단순히 전선으로 직접 연결하여 데이터를 주고받았지만, 시간이 지나며 더 많은 컴퓨터들이 연결될 필요가 생겼고, 이에 따라 보다 체계적이고 효율적인 네트워크 구조가 발전하게 되었습니다.

현대의 컴퓨터들은 대부분 네트워크에 연결되어 있으며, 이를 통해 웹 브라우징, 파일 공유, 원격 접속 등 다양한 작업을 수행할 수 있습니다.

#### 현대 네트워크 구조 예시

아래 그림은 전형적인 현대 네트워크의 구성 예시입니다. (※ 그림은 시각적 이해를 돕기 위한 참고용입니다.)

<img src="img/image.png">

### 네트워크 발전 역사 및 주요 개념

네트워크의 발전 과정을 간단히 살펴보면, 다음과 같은 기술들이 등장하며 오늘날의 인터넷으로 이어졌습니다.

| 시대          | 주요 네트워크 기술           | 설명                                                           |
| ------------- | ---------------------------- | -------------------------------------------------------------- |
| 1960년대      | 회선 교환(Circuit Switching) | 전화망 기반, 두 노드 간 전용 회선 연결                         |
| 1970년대      | 패킷 교환(Packet Switching)  | 데이터를 작은 조각(패킷)으로 나누어 전송, 효율적인 대역폭 사용 |
| 1980년대      | LAN(Local Area Network)      | 사설 네트워크 확산, TCP/IP 프로토콜 도입                       |
| 1990년대      | 인터넷 대중화                | ISP 등장, 공인 IP/사설 IP 구분                                 |
| 2000년대 이후 | 광통신, IPv6                 | 초고속 네트워크, BGP를 통한 글로벌 라우팅                      |
|               |                              |                                                                |

### 알아야 할 핵심 용어

- **회선(Circuit)**: 통신 장비 간 데이터를 주고받는 물리적 경로
- **패킷(Packet)**: 데이터를 작게 나눈 전송 단위
- **프로토콜(Protocol)**: 통신을 위한 규칙이나 약속 (예: TCP/IP)
- **LAN**: 한정된 공간(예: 가정, 회사) 내에서의 네트워크
- **ISP(Internet Service Provider)**: 인터넷 연결을 제공하는 업체
- **광통신**: 빛을 매개로 한 고속 데이터 전송 기술
- **라우터(Router)**: 데이터를 목적지로 보내기 위한 경로를 결정하는 장비
- **BGP(Border Gateway Protocol)**: 대규모 네트워크 간 라우팅 경로를 조정하는 프로토콜

## 2. 네트워크에서 IP와 Port란?

### IP와 포트는 왜 필요할까요?

인터넷에서 장치들이 서로 통신하려면 IP 주소와 Port 번호가 필수적입니다. 이는 우편 주소(IP)와 우편함(Port) 역할과 같습니다.

- **IP 주소(IP Address)**: 네트워크에서 장치를 식별하는 고유한 주소 (예: 192.168.1.1)
- **Port 번호(Port Number)**: 동일한 장치 내에서 어떤 서비스(프로그램)와 통신할지를 결정하는 번호 (예: 80, 443, 22, 8080)

> [!note]
>
> 개인 컴퓨터에서의 IP와 port와 네트워크망에서 IP와 Port는 비슷하면서도 조금 다른 의미를 가지게 됩니다. 위의 설명은 개인 컴퓨터를 기준으로 되어 있습니다.

### 포트의 역할과 사용 예시

포트는 하나의 컴퓨터 안에서 여러 프로그램이 네트워크를 동시에 사용할 수 있도록 도와주는 '문'입니다.
예를 들어, 웹 브라우저는 80번(HTTP), 보안 웹 접속은 443번(HTTPS)을 사용합니다.

| 포트 번호 | 서비스 | 설명                                |
| --------- | ------ | ----------------------------------- |
| 80        | HTTP   | 웹사이트 접속 (암호화 없음)         |
| 443       | HTTPS  | 보안 웹사이트 접속 (TLS/SSL 암호화) |
| 22        | SSH    | 터미널 원격 접속 (보안 쉘)          |
| 3389      | RDP    | 원격 데스크톱 연결                  |
|           |        |                                     |

### DNS와 IP 주소

<img src="img/image 1.png">

컴퓨터는 숫자인 IP 주소로 통신하지만, 사람은 기억하기 쉽도록 <b>도메인 이름(예: google.com)</b>을 사용합니다.
이를 가능하게 해주는 것이 바로 <b>DNS(Domain Name System)</b>입니다.

사용자가 도메인을 입력하면 → DNS 서버가 해당 도메인의 IP 주소를 찾아 반환합니다.

이 과정을 통해 우리는 도메인을 입력하는 것만으로도 웹사이트에 접속할 수 있습니다.

도메인을 사용하려면 등록이 필요하며, 전 세계의 DNS 시스템에 해당 이름과 IP 매핑 정보를 알려야 합니다.

### NAT(Network Address Translation)과 포트 포워딩

현실적으로는 하나의 공인 IP 주소를 여러 장치가 공유해야 할 때가 많습니다. 이때 사용하는 기술이 NAT와 포트 포워딩입니다.

- **NAT**: 사설 IP를 공인 IP로 변환하여 외부와 통신 가능하게 함

- **포트 포워딩**: 외부에서 내부 네트워크의 특정 장치로 접근할 수 있도록 설정하는 과정입니다. 일반적으로 공유기나 방화벽이 공인 IP를 갖고 있기 때문에, 내부 네트워크의 특정 장치(예: 웹 서버, 게임 서버)에 외부 요청을 전달하려면 포트 포워딩이 필요합니다. 예를 들어, 공유기에서 `공인IP:8080`으로 들어온 요청을 `192.168.1.100:80`(내부 웹 서버)로 전달하는 방식입니다.
- **포트 포워딩 예시**: 특정 포트를 내부 장치로 매핑(1:1로 대응시킴)하여 외부에서 접근 가능하게 함 (예: 외부(공유기 또는 라우터의IP, port), 23.11.14.100:80 → 내부(실제 서버 프로그램이 돌아가는 컴퓨터)IP: 192.168.1.100:3424

### 체크 포인트

<img src="img/image 2.png">

컴퓨터가 네트워크를 통해 통신하기 위해서는 다음 두 가지가 필수입니다:

1. 상대방의 IP 주소를 알아야 함
2. 어떤 Port에서 서비스가 실행 중인지 알아야 함

운영체제는 포트 번호를 통해 요청을 해당 프로그램(서버)으로 전달합니다.
예를 들어, 웹서버가 80번 포트에서 대기 중이면, 80번 포트로 들어온 요청은 웹서버가 처리합니다.

- 대부분의 도메인(예: google.com)도 포트를 사용합니다.
- 일반적으로 80(HTTP)과 443(HTTPS)은 생략 가능합니다.
  - 예: http://google.com → 실제로는 google.com:80으로 접속됩니다.

## 3. 게이트웨이(Gateway)란?

### 게이트웨이는 무엇인가요?

게이트웨이(Gateway)는 **서로 다른 네트워크를 연결해주는 통로** 역할을 합니다. 일반적으로 **내부 네트워크(사설망)가 외부 네트워크(인터넷)와 통신**하려면 반드시 게이트웨이를 거쳐야 합니다.

쉽게 말해, 게이트웨이는 네트워크의 **출입구 또는 경비초소 같은 역할**을 하며, 내부에서 외부로 나가는 트래픽이나 외부에서 들어오는 요청을 제어하고 중계합니다. 네트워크의 보안 감시 역할을 하기도 합니다.

<img src="img/image 3.png">

위의 사진에서 파란색 노드는 라우터(router)이자 Gateway의 역활을 수행하고 있습니다. 위의 그림을 전부 이해할 필요는 없으며 전체적인 느낌만 기억을 하면 좋습니다. 구름의 의미는 거리가 실제로 있음을 의미하며, 실제 구름끼리의 거리는 한국과 미국 또는 한국내에서 서울과 부산 정도의 거리를 가지고 있습니다.

### 주요 역할

1. **패킷 전달**: 내부 네트워크에서 외부 네트워크(WAN)로(또는 그 반대로) 트래픽을 전달
2. **NAT(Network Address Translation)**: 내부 사설 IP와 공인 IP 변환
3. **보안 기능**: 방화벽, 포트 차단, 등을 통해 외부 접근을 제어
4. **라우팅 기능**: 목적지 IP에 따라 최적의 경로로 데이터를 전달 (BGP 등 라우팅 알고리즘 활용)

> [!note]
>
> **라우팅이 왜 필요할까요?**
>
> 우리의 생각과 달리 네트워크는 넓고 방대합니다. 우리가 알고있는 정보는 IP 뿐입니다. 사람이 주소를 바탕으로 장소를 찾아갈때 지도나 네비게이터가 없다면 찾아가는게 가능할까요? 아마 부분적으로 가능하고 부분적으로 실패할 확률이 높습니다. 라우팅이라는 것은 IP를 전달받아 해당 IP가 어디에 존재하는지 근처에 있는 라우터에게 물어보면서 길을 확인한후 유저의 요청이 가는 경로를 안내해주는 것으로 생각할 수 있습니다.

### 게이트웨이의 유형

| 유형                            | 설명                                                                          |
| ------------------------------- | ----------------------------------------------------------------------------- |
| **일반 컴퓨터의 게이트웨이**    | 인터넷에 접속하기 위해 기본 게이트웨이를 설정해야 함 (ex: 192.168.1.1)        |
| **공유기(라우터)의 게이트웨이** | 가정/기업에서 사용하는 공유기(라우터), 내부 네트워크와 ISP를 연결             |
| **ISP의 게이트웨이**            | 통신사에서 운영하며, 사용자의 트래픽을 인터넷으로 전달 (Edge Router, BRAS 등) |
| **응용 계층 게이트웨이**        | 프록시 서버, 방화벽 등 트래픽을 중계 또는 분석하는 장비                       |

## 4. 네트워크에서 IP, 포트, 게이트웨이의 관계

네트워크를 구성하는 핵심 개념에는 IP 주소, 포트, 그리고 게이트웨이가 있습니다. 이 세 가지는 실제 인터넷 통신의 흐름을 이해하는 데 필수적인 요소입니다.

### IP 주소란?

IP 주소는 네트워크 상에서 각 장치를 식별하는 고유한 주소입니다. IP가 없다면 어떤 컴퓨터에 데이터를 보내야 하는지 알 수 없습니다.

- 공인 IP: 전 세계에서 고유한 주소. 인터넷과 직접 통신 가능 (예: 8.8.8.8)
- 사설 IP: 내부 네트워크 전용 주소. 공유기 뒤에 있는 장치들이 사용 (예: 192.168.x.x)

> [!note]
>
> 사설 IP는 인터넷에 바로 연결될 수 없습니다. 대신 게이트웨이가 공인 IP로 변환해 외부와 통신을 중계해줍니다.

### 포트(Port)란?

포트는 하나의 장치(IP) 안에서 <b>어떤 프로그램(서비스)</b>과 통신할지를 결정하는 번호입니다.

- IP가 '주소'라면, 포트는 '방 번호' 같은 개념입니다.
- 여러 프로그램이 동시에 실행될 수 있으므로 포트를 구분해 요청을 전달합니다.

| 포트 번호 | 서비스 | 설명                                |
| --------- | ------ | ----------------------------------- |
| 80        | HTTP   | 웹사이트 접속 (암호화 없음)         |
| 443       | HTTPS  | 보안 웹사이트 접속 (TLS/SSL 암호화) |
| 22        | SSH    | 터미널 원격 접속 (보안 쉘)          |
| 3389      | RDP    | 원격 데스크톱 연결                  |

### 게이트웨이란?

게이트웨이는 내부 네트워크와 외부 네트워크(인터넷) 사이의 연결지점입니다.

- 내부 장치들은 보통 사설 IP만 가지고 있기 때문에, 직접 인터넷에 접속할 수 없습니다.
- 이때 게이트웨이가 대신 인터넷과 통신하며, 사설 IP와 공인 IP 사이를 **변환(NAT)**해 줍니다.
- 또한 외부에서 내부로 들어오는 요청을 특정 장치로 전달할 때는 포트 포워딩 설정이 필요합니다.

> 예시: 외부에서 `공인IP:8080`으로 들어온 요청을 내부의 `192.168.1.100:80`으로 전달하도록 공유기에서 설정할 수 있습니다.

### 실제 통신 흐름 요약

1. 사용자가 웹 브라우저에 **google.com** 입력
2. 브라우저가 DNS를 통해 해당 도메인의 IP 주소를 찾음 (예: 142.250.206.14)
3. 이 IP로 요청을 보낼 때, 사용자의 컴퓨터는 자신의 게이트웨이(보통 공유기)에게 요청을 전달
4. 게이트웨이는 공인 IP를 통해 요청을 인터넷으로 전송
5. 상대 서버가 응답을 보내오면, 다시 게이트웨이를 거쳐 사용자의 컴퓨터로 전달

### 왜 이 세 가지(IP, Port, Gateway)가 중요한가요?

- IP 주소: 어디로 보낼지를 정함
- 포트 번호: 어떤 프로그램에게 보낼지를 정함
- 게이트웨이: 실제 인터넷에 연결되는 통로 역할

이 세 가지가 모두 정확히 설정되어야 네트워크 통신이 정상적으로 작동합니다.

## 5. 실습: 게이트웨이 및 네트워크 테스트

지금까지 배운 IP, 포트, 게이트웨이 개념을 실제 명령어로 확인해보는 실습입니다. 아래 명령어들은 대부분의 리눅스나 macOS 환경에서 바로 실행 가능합니다.

### (1) 내 컴퓨터의 게이트웨이 확인하기

```bash
ip route
```

출력 예시:

```bash
default via 192.168.1.1 dev eth0 proto dhcp metric 100
```

- default via 다음에 있는 IP가 기본 게이트웨이입니다.
- 이 주소를 통해 외부 인터넷과 통신합니다.

### (2) 게이트웨이 연결 테스트 (Ping)

```bash
ping 192.168.1.1
```

출력 예시:

```bash
64 bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=1.23 ms
```

- `ping`은 상대 네트워크 장비가 살아있는지 확인하는 기본적인 도구입니다.
- 응답이 오면 해당 장비와 통신이 가능하다는 뜻입니다.

### (3) 내 공인 IP 확인하기

```bash
curl ifconfig.me
```

출력 예시:

```bash
203.0.113.45
```

- 이는 인터넷에서 보이는 공인 IP 주소입니다.
- 공유기를 통해 NAT가 적용되었다면, 이 IP는 모든 내부 장치가 공유하는 주소입니다.

### (4) 특정 포트가 열려 있는지 확인

```bash
nc -zv 192.168.1.1 80
```

출력 예시:

```bash
Connection to 192.168.1.1 80 port [tcp/http] succeeded!
```

- nc 명령어를 이용해 해당 IP의 특정 포트(여기선 80)가 열려 있는지 확인할 수 있습니다.
- 포트가 열려 있으면 해당 서비스(예: 웹서버)가 실행 중이라는 의미입니다.

### (5) Python을 이용한 포트 테스트

```python
import socket

def check_port(ip, port):
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
        s.settimeout(1)
        result = s.connect_ex((ip, port))
        if result == 0:
            return f"Port {port} is open on {ip}"
        else:
            return f"Port {port} is closed on {ip}"

print(check_port("192.168.1.1", 80))
```

- 이 스크립트는 지정한 IP와 포트에 연결이 가능한지 프로그램적으로 확인할 수 있습니다.
- 여러 포트를 반복 확인하고 싶을 때도 유용합니다.

### 실습 요약

| 항목                 | 확인 방법          |
| -------------------- | ------------------ |
| 기본 게이트웨이      | ip route           |
| 게이트웨이 연결 확인 | ping               |
| 공인 IP 확인         | curl ifconfig.me   |
| 포트 열림 여부       | nc -zv [ip] [port] |
| 코드로 확인          | Python 소켓 사용   |
